!function(e,r){"undefined"!=typeof module&&module.exports?module.exports=r(require("foreach")):"function"==typeof define&&define.amd?define(["foreach"],r):(e._utils.jsonPointer=r(e._utils.forEach),e.returnExports=e._utils.jsonPointer)}(this,function(e){function r(e,n,t){if(3===arguments.length)return r.set(e,n,t);if(2===arguments.length)return r.get(e,n);var o=r.bind(r,e);for(var i in r)r.hasOwnProperty(i)&&(o[i]=r[i].bind(o,e));return o}var n=e;return r.get=function(e,n){for(var t,o=r.parse(n);o.length;){if(t=o.shift(),!e.hasOwnProperty(t))throw new Error("Invalid reference token: "+t);e=e[t]}return e},r.set=function(e,n,t){for(var o,i=r.parse(n),u=i[0];i.length>1;)o=i.shift(),u=i[0],e.hasOwnProperty(o)||(e[o]=u.match(/^\d+$/)?[]:{}),e=e[o];return e[u]=t,this},r.remove=function(e,n){var t=r.parse(n),o=t.pop();if(void 0===o)throw new Error('Invalid JSON pointer for remove: "'+n+'"');delete r.get(e,r.compile(t))[o]},r.dict=function(e,n){var t={};return r.walk(e,function(e,r){t[r]=e},n),t},r.walk=function(e,t,o){var i=[];o=o||function(e){var r=Object.prototype.toString.call(e);return"[object Object]"===r||"[object Array]"===r},function u(e){n(e,function(e,n){i.push(String(n)),o(e)?u(e):t(e,r.compile(i)),i.pop()})}(e)},r.has=function(e,n){try{r.get(e,n)}catch(t){return!1}return!0},r.escape=function(e){return e.toString().replace(/~/g,"~0").replace(/\//g,"~1")},r.unescape=function(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")},r.parse=function(e){if(""===e)return[];if("/"!==e.charAt(0))throw new Error("Invalid JSON pointer: "+e);return e.substring(1).split(/\//).map(r.unescape)},r.compile=function(e){return 0===e.length?"":"/"+e.map(r.escape).join("/")},r});